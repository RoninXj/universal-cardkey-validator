# é€šç”¨å¡å¯†æ¨¡å—ä½¿ç”¨æŒ‡å—

> **é‡è¦è¯´æ˜**ï¼šæœ¬æ¨¡å—å·²å‡çº§ä¸ºé€šç”¨å¡å¯†éªŒè¯æ¨¡å—ï¼Œé€‚ç”¨äºä»»ä½•éœ€è¦å¡å¯†éªŒè¯çš„è„šæœ¬é¡¹ç›®ï¼Œä¸ä»…é™äºå¿«æ‰‹è„šæœ¬ã€‚

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- **[å¿«é€Ÿå¼€å§‹](QUICK_START.md)** - 5åˆ†é’Ÿå¿«é€Ÿé›†æˆ
- **[å®Œæ•´æ–‡æ¡£](README-UNIVERSAL.md)** - å®Œæ•´ API æ–‡æ¡£
- **[æ¨¡å—æŒ‡å—](CARDKEY_MODULE_GUIDE.md)** - ä½ æ­£åœ¨é˜…è¯» â­
- **[å®‰è£…æŒ‡å—](INSTALL_GUIDE.md)** - å®‰è£…å’Œéƒ¨ç½²æŒ‡å—
- **[é’é¾™é¢æ¿](QINGLONG_GUIDE.md)** - é’é¾™é¢æ¿ä¸“ç”¨æŒ‡å—
- **[æ–‡æ¡£ç´¢å¼•](DOCUMENTATION_INDEX.md)** - æ‰€æœ‰æ–‡æ¡£å¯¼èˆª

## ğŸ“– æ¦‚è¿°

æœ¬æ¨¡å—æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„å¡å¯†éªŒè¯è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ°ä»»ä½• Node.js è„šæœ¬é¡¹ç›®ä¸­ã€‚æ— è®ºä½ æ˜¯å¼€å‘å¿«æ‰‹è„šæœ¬ã€æŠ–éŸ³è„šæœ¬ã€çˆ¬è™«è„šæœ¬è¿˜æ˜¯å…¶ä»–è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ¥å®ç°å¡å¯†éªŒè¯åŠŸèƒ½ã€‚

## ğŸŒŸ æ¨¡å—ç‰¹ç‚¹

- âœ… **é€šç”¨æ€§å¼º** - ä¸é™äºç‰¹å®šå¹³å°æˆ–è„šæœ¬ç±»å‹
- âœ… **ç®€å•æ˜“ç”¨** - å‡ è¡Œä»£ç å³å¯é›†æˆ
- âœ… **é«˜åº¦å¯é…ç½®** - æ”¯æŒè‡ªå®šä¹‰éªŒè¯æ¥å£ã€å‚æ•°ã€è¯·æ±‚å¤´
- âœ… **æ™ºèƒ½ç¼“å­˜** - è‡ªåŠ¨ç¼“å­˜éªŒè¯ç»“æœï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚
- âœ… **å®Œå–„çš„é”™è¯¯å¤„ç†** - è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€åé¦ˆ
- âœ… **é’é¾™é¢æ¿å‹å¥½** - å®Œç¾æ”¯æŒé’é¾™é¢æ¿ç¯å¢ƒ

## ğŸ“¦ æ­¥éª¤1ï¼šå‘å¸ƒæ¨¡å—åˆ° GitHub

### 1.1 å‡†å¤‡æ¨¡å—æ–‡ä»¶

ç¡®ä¿ä½ çš„é¡¹ç›®åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
- `cardkey-validator.js` - æ ¸å¿ƒæ¨¡å—ä»£ç 
- `package.json` - æ¨¡å—é…ç½®æ–‡ä»¶
- `README-UNIVERSAL.md` - æ¨¡å—è¯´æ˜æ–‡æ¡£
- `.gitignore` - Git å¿½ç•¥æ–‡ä»¶é…ç½®

### 1.2 åˆ›å»º GitHub ä»“åº“

1. ç™»å½• GitHub
2. ç‚¹å‡»å³ä¸Šè§’ "+" -> "New repository"
3. å¡«å†™ä»“åº“ä¿¡æ¯ï¼š
   - Repository name: `universal-cardkey-validator`ï¼ˆæ¨èï¼‰
   - Description: `é€šç”¨å¡å¯†éªŒè¯æ¨¡å— - é€‚ç”¨äºä»»ä½•è„šæœ¬é¡¹ç›®`
   - é€‰æ‹© Publicï¼ˆæ¨èï¼‰æˆ– Private
4. ç‚¹å‡» "Create repository"

### 1.3 ä¸Šä¼ æ–‡ä»¶åˆ° GitHub

åœ¨æœ¬åœ°é¡¹ç›®ç›®å½•æ‰§è¡Œï¼š

```bash
# åˆå§‹åŒ– Git ä»“åº“ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git init

# æ·»åŠ æ¨¡å—æ–‡ä»¶
git add cardkey-validator.js package.json README-UNIVERSAL.md .gitignore

# æäº¤
git commit -m "Initial commit: é€šç”¨å¡å¯†éªŒè¯æ¨¡å— v1.0.0"

# æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆæ›¿æ¢ your-username ä¸ºä½ çš„ GitHub ç”¨æˆ·åï¼‰
git remote add origin https://github.com/your-username/universal-cardkey-validator.git

# æ¨é€åˆ° GitHub
git branch -M main
git push -u origin main
```

### 1.4 åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆæ¨èï¼‰

ä½¿ç”¨ç‰ˆæœ¬æ ‡ç­¾ä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œå›æ»šï¼š

```bash
# åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.0 -m "Release version 1.0.0 - é€šç”¨å¡å¯†éªŒè¯æ¨¡å—"

# æ¨é€æ ‡ç­¾åˆ° GitHub
git push origin v1.0.0
```

### 1.5 éªŒè¯å‘å¸ƒ

è®¿é—®ä½ çš„ GitHub ä»“åº“é¡µé¢ï¼Œç¡®è®¤ï¼š
- âœ… æ‰€æœ‰æ–‡ä»¶å·²ä¸Šä¼ 
- âœ… æ ‡ç­¾å·²åˆ›å»ºï¼ˆåœ¨ Releases æˆ– Tags é¡µé¢æŸ¥çœ‹ï¼‰
- âœ… README æ–‡æ¡£æ­£å¸¸æ˜¾ç¤º

## ğŸš€ æ­¥éª¤2ï¼šåœ¨é¡¹ç›®ä¸­ä½¿ç”¨

### æ–¹æ³•1ï¼šä» GitHub å®‰è£…ï¼ˆæ¨èï¼‰

åœ¨ä½ çš„è„šæœ¬é¡¹ç›®ç›®å½•æ‰§è¡Œï¼š

```bash
# å®‰è£…æœ€æ–°ç‰ˆæœ¬
npm install github:your-username/universal-cardkey-validator

# æˆ–å®‰è£…æŒ‡å®šç‰ˆæœ¬
npm install github:your-username/universal-cardkey-validator#v1.0.0
```

### æ–¹æ³•2ï¼šåœ¨ package.json ä¸­æ·»åŠ ä¾èµ–

ç¼–è¾‘ `package.json`ï¼š

```json
{
  "dependencies": {
    "universal-cardkey-validator": "github:your-username/universal-cardkey-validator#v1.0.0"
  }
}
```

ç„¶åè¿è¡Œï¼š
```bash
npm install
```

### æ–¹æ³•3ï¼šé’é¾™é¢æ¿å®‰è£…

åœ¨é’é¾™é¢æ¿çš„ä¾èµ–ç®¡ç†ä¸­æ·»åŠ ï¼š
```
github:your-username/universal-cardkey-validator#v1.0.0
```

## ğŸ“ æ­¥éª¤3ï¼šåœ¨è„šæœ¬ä¸­é›†æˆæ¨¡å—

### é€šç”¨é›†æˆæ–¹å¼ï¼ˆé€‚ç”¨äºä»»ä½•è„šæœ¬ï¼‰

#### 1. åˆ é™¤åŸæœ‰çš„å¡å¯†éªŒè¯ä»£ç 

å¦‚æœä½ çš„è„šæœ¬ä¸­å·²ç»æœ‰å¡å¯†éªŒè¯ä»£ç ï¼Œåˆ é™¤ä»¥ä¸‹éƒ¨åˆ†ï¼š

```javascript
// åˆ é™¤è¿™äº›ä»£ç 
class CardKeyValidator { ... }
let globalCardKeyValidator = null;
function initializeCardKeyValidator() { ... }
```

#### 2. å¼•å…¥æ¨¡å—

åœ¨è„šæœ¬å¼€å¤´æ·»åŠ ï¼š

```javascript
const { initializeCardKeyValidator, getCardKeyValidator } = require('universal-cardkey-validator');
```

#### 3. åˆå§‹åŒ–éªŒè¯å™¨

åœ¨è„šæœ¬åˆå§‹åŒ–éƒ¨åˆ†è°ƒç”¨ï¼š

```javascript
// åŸºæœ¬åˆå§‹åŒ–
initializeCardKeyValidator();

// æˆ–è‡ªå®šä¹‰é…ç½®
initializeCardKeyValidator({
    verifyUrl: 'https://your-api.com/verify',
    cacheTimeout: 1800,
    customParams: {
        app_id: 'your_app_id'
    }
});
```

#### 4. ä½¿ç”¨éªŒè¯å™¨

**æ–¹å¼Aï¼šæ‰‹åŠ¨éªŒè¯å¹¶æ·»åŠ å¡å¯†**

```javascript
async function yourFunction(requestData) {
    const validator = getCardKeyValidator();
    if (!validator) {
        console.log('å¡å¯†éªŒè¯å™¨æœªåˆå§‹åŒ–');
        return null;
    }

    // éªŒè¯å¡å¯†
    const verifyResult = await validator.verify();
    if (!verifyResult.success) {
        console.log('å¡å¯†éªŒè¯å¤±è´¥:', verifyResult.message);
        return null;
    }

    // æ·»åŠ å¡å¯†åˆ°è¯·æ±‚
    const dataWithKey = {
        ...requestData,
        card_key: validator.cardKey
    };

    // å‘é€è¯·æ±‚...
}
```

**æ–¹å¼Bï¼šä½¿ç”¨è¾…åŠ©å‡½æ•°ï¼ˆæ¨èï¼‰**

```javascript
const { verifyAndAddCardKey } = require('universal-cardkey-validator');

async function yourFunction(requestData) {
    // è‡ªåŠ¨éªŒè¯å¹¶æ·»åŠ å¡å¯†
    const dataWithKey = await verifyAndAddCardKey(requestData);
    if (!dataWithKey) {
        console.log('å¡å¯†éªŒè¯å¤±è´¥');
        return null;
    }

    // å‘é€è¯·æ±‚...
}
```

### å…·ä½“ç¤ºä¾‹

#### ç¤ºä¾‹1ï¼šå¿«æ‰‹è„šæœ¬

```javascript
const { initializeCardKeyValidator, getCardKeyValidator } = require('universal-cardkey-validator');

// åˆå§‹åŒ–
initializeCardKeyValidator();

class KuaishouAdTask {
    async requestSignService(requestData, description) {
        const validator = getCardKeyValidator();
        if (!validator) return null;

        const verifyResult = await validator.verify();
        if (!verifyResult.success) return null;

        const requestDataWithKey = {
            ...requestData,
            card_key: validator.cardKey
        };

        // å‘é€è¯·æ±‚...
    }
}
```

#### ç¤ºä¾‹2ï¼šæŠ–éŸ³è„šæœ¬

```javascript
const { initializeCardKeyValidator, verifyAndAddCardKey } = require('universal-cardkey-validator');

initializeCardKeyValidator({
    customParams: { platform: 'douyin' }
});

async function douyinTask() {
    const data = await verifyAndAddCardKey({ task: 'like' });
    if (!data) return;
    // æ‰§è¡Œä»»åŠ¡...
}
```

#### ç¤ºä¾‹3ï¼šé€šç”¨çˆ¬è™«

```javascript
const { createCardKeyValidator } = require('universal-cardkey-validator');

async function crawl(cardKey) {
    const validator = createCardKeyValidator(cardKey);
    const result = await validator.verify();
    if (!result.success) return;
    // æ‰§è¡Œçˆ¬è™«...
}
```

## ğŸ”„ æ­¥éª¤4ï¼šæ›´æ–°æ¨¡å—

å½“æ¨¡å—æœ‰æ›´æ–°æ—¶ï¼š

### æœ¬åœ°é¡¹ç›®æ›´æ–°

```bash
# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
npm update universal-cardkey-validator

# æˆ–å®‰è£…æŒ‡å®šæ–°ç‰ˆæœ¬
npm install github:your-username/universal-cardkey-validator#v1.1.0
```

### é’é¾™é¢æ¿æ›´æ–°

1. è¿›å…¥ä¾èµ–ç®¡ç†
2. åˆ é™¤æ—§çš„ `universal-cardkey-validator` ä¾èµ–
3. é‡æ–°æ·»åŠ æ–°ç‰ˆæœ¬ï¼š`github:your-username/universal-cardkey-validator#v1.1.0`

## ğŸ“‹ å®Œæ•´ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåŸºç¡€è„šæœ¬ç»“æ„

```javascript
const { initializeCardKeyValidator, getCardKeyValidator } = require('universal-cardkey-validator');

// åˆå§‹åŒ–
initializeCardKeyValidator();

// ä¸»å‡½æ•°
async function main() {
    const validator = getCardKeyValidator();
    
    // éªŒè¯å¡å¯†
    const result = await validator.verify();
    if (!result.success) {
        console.log('å¡å¯†éªŒè¯å¤±è´¥ï¼Œé€€å‡ºè„šæœ¬');
        return;
    }
    
    console.log('å¡å¯†éªŒè¯æˆåŠŸï¼Œå¼€å§‹æ‰§è¡Œä»»åŠ¡');
    
    // æ‰§è¡Œä½ çš„ä»»åŠ¡...
}

main();
```

### ç¤ºä¾‹2ï¼šå¿«æ‰‹è„šæœ¬ï¼ˆå®Œæ•´ï¼‰

```javascript
const request = require("request");
const { initializeCardKeyValidator, getCardKeyValidator } = require('universal-cardkey-validator');

// åˆå§‹åŒ–å¡å¯†éªŒè¯å™¨
initializeCardKeyValidator();

class KuaishouAdTask {
    async requestSignService(requestData, description) {
        const validator = getCardKeyValidator();
        if (!validator) {
            console.log('å¡å¯†éªŒè¯å™¨æœªåˆå§‹åŒ–');
            return null;
        }

        const verifyResult = await validator.verify();
        if (!verifyResult.success) {
            console.log('å¡å¯†éªŒè¯å¤±è´¥:', verifyResult.message);
            return null;
        }

        const requestDataWithKey = {
            ...requestData,
            card_key: validator.cardKey
        };

        // å‘é€è¯·æ±‚...
        return requestDataWithKey;
    }
}
```

### ç¤ºä¾‹3ï¼šå¤šå¹³å°é€šç”¨è„šæœ¬

```javascript
const { initializeCardKeyValidator, verifyAndAddCardKey } = require('universal-cardkey-validator');

// æ ¹æ®å¹³å°é…ç½®ä¸åŒçš„éªŒè¯æ¥å£
const platform = process.env.PLATFORM || 'kuaishou';
const verifyUrls = {
    kuaishou: 'https://ks-api.com/verify',
    douyin: 'https://dy-api.com/verify',
    default: 'https://default-api.com/verify'
};

initializeCardKeyValidator({
    verifyUrl: verifyUrls[platform] || verifyUrls.default,
    customParams: {
        platform: platform
    }
});

async function universalTask(taskData) {
    const data = await verifyAndAddCardKey(taskData);
    if (!data) {
        console.log('å¡å¯†éªŒè¯å¤±è´¥');
        return;
    }
    
    // æ‰§è¡Œä»»åŠ¡...
    console.log('ä»»åŠ¡æ‰§è¡Œä¸­...');
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**ï¼šå¿…é¡»è®¾ç½® `CARD_KEY` æˆ– `km` ç¯å¢ƒå˜é‡
2. **ç‰ˆæœ¬ç®¡ç†**ï¼šå»ºè®®ä½¿ç”¨æ ‡ç­¾ç®¡ç†ç‰ˆæœ¬ï¼ˆå¦‚ v1.0.0ï¼‰ï¼Œä¾¿äºå›æ»š
3. **ä¾èµ–å®‰è£…**ï¼šç¡®ä¿è¿è¡Œè„šæœ¬å‰æ‰§è¡Œ `npm install`
4. **ç§æœ‰ä»“åº“**ï¼šå¦‚æœä½¿ç”¨ç§æœ‰ä»“åº“ï¼Œéœ€è¦é…ç½® GitHub è®¿é—®ä»¤ç‰Œ
5. **é€šç”¨æ€§**ï¼šæ¨¡å—è®¾è®¡ä¸ºé€šç”¨æ¨¡å—ï¼Œå¯ç”¨äºä»»ä½•è„šæœ¬é¡¹ç›®
6. **è‡ªå®šä¹‰é…ç½®**ï¼šæ ¹æ®ä½ çš„éªŒè¯æ¥å£è°ƒæ•´ `verifyUrl` å’Œå…¶ä»–å‚æ•°

## ğŸ¯ æ¨¡å—ä¼˜åŠ¿

âœ… **é€šç”¨æ€§å¼º**ï¼šé€‚ç”¨äºä»»ä½•è„šæœ¬é¡¹ç›®ï¼Œä¸é™äºç‰¹å®šå¹³å°
âœ… **ä»£ç å¤ç”¨**ï¼šå¤šä¸ªè„šæœ¬å…±äº«åŒä¸€ä¸ªæ¨¡å—
âœ… **ç»Ÿä¸€æ›´æ–°**ï¼šä¿®æ”¹æ¨¡å—åï¼Œæ‰€æœ‰è„šæœ¬åªéœ€æ›´æ–°ä¾èµ–
âœ… **ç‰ˆæœ¬æ§åˆ¶**ï¼šé€šè¿‡ Git æ ‡ç­¾ç®¡ç†ç‰ˆæœ¬
âœ… **æ˜“äºç»´æŠ¤**ï¼šæ¨¡å—ä»£ç ç‹¬ç«‹ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤
âœ… **å‡å°‘å†—ä½™**ï¼šè„šæœ¬æ–‡ä»¶æ›´ç®€æ´
âœ… **é«˜åº¦å¯é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰éªŒè¯æ¥å£ã€å‚æ•°ã€è¯·æ±‚å¤´
âœ… **æ™ºèƒ½ç¼“å­˜**ï¼šè‡ªåŠ¨ç¼“å­˜éªŒè¯ç»“æœï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚
âœ… **å®Œå–„çš„ API**ï¼šæä¾›å¤šç§ä½¿ç”¨æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### é—®é¢˜1ï¼šæ¨¡å—åŠ è½½å¤±è´¥

```
Error: Cannot find module 'universal-cardkey-validator'
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤ä¾èµ–å·²å®‰è£…ï¼š`npm list universal-cardkey-validator`
2. é‡æ–°å®‰è£…ï¼š`npm install github:your-username/universal-cardkey-validator#v1.0.0`
3. æ£€æŸ¥ GitHub ä»“åº“æ˜¯å¦å¯è®¿é—®

#### é—®é¢˜2ï¼šå¡å¯†éªŒè¯å¤±è´¥

**æ£€æŸ¥æ¸…å•ï¼š**
- âœ… ç¡®è®¤ç¯å¢ƒå˜é‡ `CARD_KEY` æˆ– `km` å·²è®¾ç½®
- âœ… ç¡®è®¤éªŒè¯æ¥å£åœ°å€æ­£ç¡®
- âœ… æ£€æŸ¥ç½‘ç»œè¿æ¥
- âœ… å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š`export DEV_MODE=1`

#### é—®é¢˜3ï¼šGitHub è®¿é—®æ…¢

**è§£å†³æ–¹æ¡ˆï¼š**
- ä½¿ç”¨ GitHub é•œåƒåŠ é€Ÿ
- æˆ–ä½¿ç”¨å†…åµŒä»£ç æ–¹å¼ï¼ˆä¸ä¾èµ– GitHubï¼‰

#### é—®é¢˜4ï¼šç‰ˆæœ¬æ›´æ–°é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# é‡æ–°å®‰è£…æŒ‡å®šç‰ˆæœ¬
npm install github:your-username/universal-cardkey-validator#v1.1.0
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
2. ç¡®è®¤æ¨¡å—å·²æ­£ç¡®å®‰è£…ï¼ˆ`npm list universal-cardkey-validator`ï¼‰
3. æŸ¥çœ‹è°ƒè¯•æ—¥å¿—ï¼ˆè®¾ç½® `DEV_MODE=1`ï¼‰
4. æŸ¥çœ‹ [å®Œæ•´æ–‡æ¡£](README-UNIVERSAL.md)
5. æŸ¥çœ‹ [é’é¾™é¢æ¿æŒ‡å—](QINGLONG_GUIDE.md)
